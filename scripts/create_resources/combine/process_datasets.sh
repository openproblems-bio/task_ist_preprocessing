#!/bin/bash

# TODO: The param_list metadata was mostly infered with chatGPT from the create resources scripts.
#       Double check if everything's correct.


# get the root of the directory
REPO_ROOT=$(git rev-parse --show-toplevel)

# ensure that the command below is run from the root of the repository
cd "$REPO_ROOT"

set -e

input_dir="s3://openproblems-data/resources/datasets"
publish_dir="s3://openproblems-data/resources/task_ist_preprocessing/datasets"

cat > /tmp/params.yaml << HERE
param_list:

  - id: "2023_10x_mouse_brain_xenium_combined/rep1"
    input_sp: "$input_dir/10x_xenium/2023_10x_mouse_brain_xenium/rep1/dataset.zarr"
    input_sc: "$input_dir/allen_brain_cell_atlas/2023_yao_mouse_brain_scrnaseq_10xv2/dataset.h5ad"
    dataset_id: "2023_10x_mouse_brain_xenium_combined/rep1"
    dataset_name: "Mouse brain combined 2023 tenx Xenium replicate 1 2023 Yao scRNAseq"
    dataset_url: "https://www.10xgenomics.com/datasets/fresh-frozen-mouse-brain-replicates-1-standard;https://www.ncbi.nlm.nih.gov/geo/query/acc.cgi?acc=GSE246717"
    dataset_reference: "https://www.10xgenomics.com/datasets/fresh-frozen-mouse-brain-replicates-1-standard;10.1038/s41586-023-06812-z"
    dataset_summary: "Spatial data: Xenium V1 Fresh Frozen Mouse Brain replicate 1; Single cell data: ABCA Mouse Brain scRNAseq"
    dataset_description: "Spatial data: Xenium V1 Fresh Frozen Mouse Brain replicate 1; Single cell data: ABCA Mouse Brain scRNAseq"
    dataset_organism: "mus_musculus"

  - id: "2023_10x_mouse_brain_xenium_combined/rep2"
    input_sp: "$input_dir/10x_xenium/2023_10x_mouse_brain_xenium/rep2/dataset.zarr"
    input_sc: "$input_dir/allen_brain_cell_atlas/2023_yao_mouse_brain_scrnaseq_10xv2/dataset.h5ad"
    dataset_id: "2023_10x_mouse_brain_xenium_combined/rep2"
    dataset_name: "Mouse brain combined 2023 tenx Xenium replicate 2 2023 Yao scRNAseq"
    dataset_url: "https://www.10xgenomics.com/datasets/fresh-frozen-mouse-brain-replicates-1-standard;https://www.ncbi.nlm.nih.gov/geo/query/acc.cgi?acc=GSE246717"
    dataset_reference: "https://www.10xgenomics.com/datasets/fresh-frozen-mouse-brain-replicates-1-standard;10.1038/s41586-023-06812-z"
    dataset_summary: "Spatial data: Xenium V1 Fresh Frozen Mouse Brain replicate 2; Single cell data: ABCA Mouse Brain scRNAseq"
    dataset_description: "Spatial data: Xenium V1 Fresh Frozen Mouse Brain replicate 2; Single cell data: ABCA Mouse Brain scRNAseq"
    dataset_organism: "mus_musculus"

  - id: "2023_10x_mouse_brain_xenium_combined/rep3"
    input_sp: "$input_dir/10x_xenium/2023_10x_mouse_brain_xenium/rep3/dataset.zarr"
    input_sc: "$input_dir/allen_brain_cell_atlas/2023_yao_mouse_brain_scrnaseq_10xv2/dataset.h5ad"
    dataset_id: "2023_10x_mouse_brain_xenium_combined/rep3"
    dataset_name: "Mouse brain combined 2023 tenx Xenium replicate 3 2023 Yao scRNAseq"
    dataset_url: "https://www.10xgenomics.com/datasets/fresh-frozen-mouse-brain-replicates-1-standard;https://www.ncbi.nlm.nih.gov/geo/query/acc.cgi?acc=GSE246717"
    dataset_reference: "https://www.10xgenomics.com/datasets/fresh-frozen-mouse-brain-replicates-1-standard;10.1038/s41586-023-06812-z"
    dataset_summary: "Spatial data: Xenium V1 Fresh Frozen Mouse Brain replicate 3; Single cell data: ABCA Mouse Brain scRNAseq"
    dataset_description: "Spatial data: Xenium V1 Fresh Frozen Mouse Brain replicate 3; Single cell data: ABCA Mouse Brain scRNAseq"
    dataset_organism: "mus_musculus"

  - id: "2023_10x_human_lung_xenium_combined"
    input_sp: "$input_dir/10x_xenium/2023_10x_human_lung_xenium/dataset.zarr"
    input_sc: "$input_dir/scrnaseq_for_ist/2020Travaglini_human_lung_sc/dataset.h5ad"
    dataset_id: "2023_10x_human_lung_xenium_combined"
    dataset_name: "Human lung combined 2023 tenx Xenium 2020 Travaglini scRNAseq"
    dataset_url: "https://www.10xgenomics.com/datasets/xenium-human-lung-preview-data-1-standard;https://cellxgene.cziscience.com/collections/6f6d381a-7701-4781-935c-db10d30de293"
    dataset_reference: "https://www.10xgenomics.com/datasets/xenium-human-lung-preview-data-1-standard;https://doi.org/10.1038/s41586-020-2922-4"
    dataset_summary: "Spatial data: Xenium Preview Human Non diseased Lung With Add on FFPE; Single cell data: 2020Travaglini_human_lung_sc"
    dataset_description: "Spatial data: Xenium Preview Human Non diseased Lung With Add on FFPE; Single cell data: 2020Travaglini_human_lung_sc"
    dataset_organism: "homo_sapiens"

  - id: "2023_10x_human_lung_cancer_xenium_combined"
    input_sp: "$input_dir/10x_xenium/2023_10x_human_lung_cancer_xenium/dataset.zarr"
    input_sc: "$input_dir/zuani_human_nsclc_sc/2024Zuani_human_nsclc_sc/dataset.h5ad"
    dataset_id: "2023_10x_human_lung_cancer_xenium_combined"
    dataset_name: "Human lung cancer combined 2023 tenx Xenium 2024 Zuani scRNAseq"
    dataset_url: "https://www.10xgenomics.com/datasets/xenium-human-lung-preview-data-1-standard;https://www.ebi.ac.uk/biostudies/arrayexpress/studies/E-MTAB-13526"
    dataset_reference: "https://www.10xgenomics.com/datasets/xenium-human-lung-preview-data-1-standard;https://www.ebi.ac.uk/biostudies/arrayexpress/studies/E-MTAB-13526"
    dataset_summary: "Spatial data: Xenium Preview Human Lung Cancer With Add on 2 FFPE; Single cell data: 2024Zuani_human_nsclc_sc"
    dataset_description: "Spatial data: Xenium Preview Human Lung Cancer With Add on 2 FFPE; Single cell data: 2024Zuani_human_nsclc_sc"
    dataset_organism: "homo_sapiens"

  - id: "2024_10x_human_skin_xenium_combined"
    input_sp: "$input_dir/10x_xenium/2024_10x_human_skin_xenium/dataset.zarr"
    input_sc: "$input_dir/scrnaseq_for_ist/2024Ganier_human_skin_sc/dataset.h5ad"
    dataset_id: "2024_10x_human_skin_xenium_combined"
    dataset_name: "Human skin combined 2024 tenx Xenium 2024 Ganier scRNAseq"
    dataset_url: "https://www.10xgenomics.com/datasets/human-skin-data-xenium-human-multi-tissue-and-cancer-panel-1-standard;https://spatial-skin-atlas.cellgeni.sanger.ac.uk"
    dataset_reference: "https://www.10xgenomics.com/datasets/human-skin-data-xenium-human-multi-tissue-and-cancer-panel-1-standard;https://doi.org/10.1073/pnas.2313326120"
    dataset_summary: "Spatial data: Xenium V1 hSkin nondiseased section 1 FFPE; Single cell data: 2024Ganier_human_skin_sc"
    dataset_description: "Spatial data: Xenium V1 hSkin nondiseased section 1 FFPE; Single cell data: 2024Ganier_human_skin_sc"
    dataset_organism: "homo_sapiens"

  - id: "2024_10x_human_liver_cancer_xenium_combined"
    input_sp: "$input_dir/10x_xenium/2024_10x_human_liver_cancer_xenium/dataset.zarr"
    input_sc: "$input_dir/scrnaseq_for_ist/2022Lu_human_liver_cancer_sc/dataset.h5ad"
    dataset_id: "2024_10x_human_liver_cancer_xenium_combined"
    dataset_name: "Human liver cancer combined 2024 tenx Xenium 2022 Lu scRNAseq"
    dataset_url: "https://www.10xgenomics.com/datasets/human-liver-data-xenium-human-multi-tissue-and-cancer-panel-1-standard;https://www.ncbi.nlm.nih.gov/geo/query/acc.cgi?acc=GSE149614"
    dataset_reference: "https://www.10xgenomics.com/datasets/human-liver-data-xenium-human-multi-tissue-and-cancer-panel-1-standard;https://doi.org/10.1038/s41467-022-32283-3"
    dataset_summary: "Spatial data: Xenium V1 hLiver cancer section FFPE; Single cell data: 2022Lu_human_liver_cancer_sc"
    dataset_description: "Spatial data: Xenium V1 hLiver cancer section FFPE; Single cell data: 2022Lu_human_liver_cancer_sc"
    dataset_organism: "homo_sapiens"

  - id: "2023_10x_human_colon_cancer_xenium_combined"
    input_sp: "$input_dir/10x_xenium/2023_10x_human_colon_cancer_xenium/dataset.zarr"
    input_sc: "$input_dir/scrnaseq_for_ist/2020Lee_human_colon_cancer_sc/dataset.h5ad"
    dataset_id: "2023_10x_human_colon_cancer_xenium_combined"
    dataset_name: "Human colon cancer combined 2023 tenx Xenium 2020 Lee scRNAseq"
    dataset_url: "https://www.10xgenomics.com/datasets/human-colon-preview-data-xenium-human-colon-gene-expression-panel-1-standard;https://www.ncbi.nlm.nih.gov/geo/query/acc.cgi?acc=GSE132465"
    dataset_reference: "https://www.10xgenomics.com/datasets/human-colon-preview-data-xenium-human-colon-gene-expression-panel-1-standard;https://doi.org/10.1038/s41588-020-0636-z"
    dataset_summary: "Spatial data: Xenium V1 hColon Cancer Add on FFPE; Single cell data: 2020Lee_human_colon_cancer_sc"
    dataset_description: "Spatial data: Xenium V1 hColon Cancer Add on FFPE; Single cell data: 2020Lee_human_colon_cancer_sc"
    dataset_organism: "homo_sapiens"

  - id: "2023_10x_human_breast_cancer_xenium_combined"
    input_sp: "$input_dir/10x_xenium/2023_10x_human_breast_cancer_xenium/dataset.zarr"
    input_sc: "$input_dir/wu_human_breast_cancer_sc/2021Wu_human_breast_cancer_sc/dataset.h5ad"
    dataset_id: "2023_10x_human_breast_cancer_xenium_combined"
    dataset_name: "Human breast cancer combined 2023 tenx Xenium 2021 Wu scRNAseq"
    dataset_url: "https://www.10xgenomics.com/datasets/xenium-ffpe-human-breast-with-custom-add-on-panel-1-standard;https://www.ncbi.nlm.nih.gov/geo/query/acc.cgi?acc=GSE176078"
    dataset_reference: "https://www.10xgenomics.com/datasets/xenium-ffpe-human-breast-with-custom-add-on-panel-1-standard;https://doi.org/10.1038/s41588-021-00911-1"
    dataset_summary: "Spatial data: Xenium V1 FFPE Human Breast IDC With Addon; Single cell data: 2021Wu_human_breast_cancer_sc"
    dataset_description: "Spatial data: Xenium V1 FFPE Human Breast IDC With Addon; Single cell data: 2021Wu_human_breast_cancer_sc"
    dataset_organism: "homo_sapiens"

  - id: "2022_vizgen_human_breast_cancer_merfish_combined/rep1"
    input_sp: "$input_dir/vizgen_merscope/2022_vizgen_human_breast_cancer_merfish/rep1/dataset.zarr"
    input_sc: "$input_dir/wu_human_breast_cancer_sc/2021Wu_human_breast_cancer_sc/dataset.h5ad"
    dataset_id: "2022_vizgen_human_breast_cancer_merfish_combined/rep1"
    dataset_name: "Human breast cancer combined 2022 Vizgen MERFISH rep1 2021 Wu scRNAseq"
    dataset_url: "https://info.vizgen.com/ffpe-showcase?submissionGuid=a93dbab5-c128-4269-afe3-82ea2bf9cdaf;https://www.ncbi.nlm.nih.gov/geo/query/acc.cgi?acc=GSE176078"
    dataset_reference: "https://info.vizgen.com/ffpe-showcase?submissionGuid=a93dbab5-c128-4269-afe3-82ea2bf9cdaf;https://doi.org/10.1038/s41588-021-00911-1"
    dataset_summary: "Spatial data: Vizgen Human Breast Cancer MERFISH Patient1; Single cell data: 2021Wu_human_breast_cancer_sc"
    dataset_description: "Spatial data: Vizgen Human Breast Cancer MERFISH Patient1; Single cell data: 2021Wu_human_breast_cancer_sc"
    dataset_organism: "homo_sapiens"

  - id: "2022_vizgen_human_liver_cancer_merfish_combined/rep1"
    input_sp: "$input_dir/vizgen_merscope/2022_vizgen_human_liver_cancer_merfish/rep1/dataset.zarr"
    input_sc: "$input_dir/scrnaseq_for_ist/2022Lu_human_liver_cancer_sc/dataset.h5ad"
    dataset_id: "2022_vizgen_human_liver_cancer_merfish_combined/rep1"
    dataset_name: "Human liver cancer combined 2022 Vizgen MERFISH rep1 2022 Lu scRNAseq"
    dataset_url: "https://info.vizgen.com/ffpe-showcase?submissionGuid=a93dbab5-c128-4269-afe3-82ea2bf9cdaf;https://www.ncbi.nlm.nih.gov/geo/query/acc.cgi?acc=GSE149614"
    dataset_reference: "https://info.vizgen.com/ffpe-showcase?submissionGuid=a93dbab5-c128-4269-afe3-82ea2bf9cdaf;https://doi.org/10.1038/s41467-022-32283-3"
    dataset_summary: "Spatial data: Vizgen Human Liver Cancer MERFISH Patient1; Single cell data: 2022Lu_human_liver_cancer_sc"
    dataset_description: "Spatial data: Vizgen Human Liver Cancer MERFISH Patient1; Single cell data: 2022Lu_human_liver_cancer_sc"
    dataset_organism: "homo_sapiens"

  - id: "2022_vizgen_human_liver_cancer_merfish_combined/rep2"
    input_sp: "$input_dir/vizgen_merscope/2022_vizgen_human_liver_cancer_merfish/rep2/dataset.zarr"
    input_sc: "$input_dir/scrnaseq_for_ist/2022Lu_human_liver_cancer_sc/dataset.h5ad"
    dataset_id: "2022_vizgen_human_liver_cancer_merfish_combined/rep2"
    dataset_name: "Human liver cancer combined 2022 Vizgen MERFISH rep2 2022 Lu scRNAseq"
    dataset_url: "https://info.vizgen.com/ffpe-showcase?submissionGuid=a93dbab5-c128-4269-afe3-82ea2bf9cdaf;https://www.ncbi.nlm.nih.gov/geo/query/acc.cgi?acc=GSE149614"
    dataset_reference: "https://info.vizgen.com/ffpe-showcase?submissionGuid=a93dbab5-c128-4269-afe3-82ea2bf9cdaf;https://doi.org/10.1038/s41467-022-32283-3"
    dataset_summary: "Spatial data: Vizgen Human Liver Cancer MERFISH Patient2; Single cell data: 2022Lu_human_liver_cancer_sc"
    dataset_description: "Spatial data: Vizgen Human Liver Cancer MERFISH Patient2; Single cell data: 2022Lu_human_liver_cancer_sc"
    dataset_organism: "homo_sapiens"

  - id: "2022_vizgen_human_lung_cancer_merfish_combined/rep1"
    input_sp: "$input_dir/vizgen_merscope/2022_vizgen_human_lung_cancer_merfish/rep1/dataset.zarr"
    input_sc: "$input_dir/zuani_human_nsclc_sc/2024Zuani_human_nsclc_sc/dataset.h5ad"
    dataset_id: "2022_vizgen_human_lung_cancer_merfish_combined/rep1"
    dataset_name: "Human lung cancer combined 2022 Vizgen MERFISH rep1 2024 Zuani scRNAseq"
    dataset_url: "https://info.vizgen.com/ffpe-showcase?submissionGuid=a93dbab5-c128-4269-afe3-82ea2bf9cdaf;https://www.ebi.ac.uk/biostudies/arrayexpress/studies/E-MTAB-13526"
    dataset_reference: "https://info.vizgen.com/ffpe-showcase?submissionGuid=a93dbab5-c128-4269-afe3-82ea2bf9cdaf;https://www.ebi.ac.uk/biostudies/arrayexpress/studies/E-MTAB-13526"
    dataset_summary: "Spatial data: Vizgen Human Lung Cancer MERFISH Patient1; Single cell data: 2024Zuani_human_nsclc_sc"
    dataset_description: "Spatial data: Vizgen Human Lung Cancer MERFISH Patient1; Single cell data: 2024Zuani_human_nsclc_sc"
    dataset_organism: "homo_sapiens"

  - id: "2022_vizgen_human_lung_cancer_merfish_combined/rep2"
    input_sp: "$input_dir/vizgen_merscope/2022_vizgen_human_lung_cancer_merfish/rep2/dataset.zarr"
    input_sc: "$input_dir/zuani_human_nsclc_sc/2024Zuani_human_nsclc_sc/dataset.h5ad"
    dataset_id: "2022_vizgen_human_lung_cancer_merfish_combined/rep2"
    dataset_name: "Human lung cancer combined 2022 Vizgen MERFISH rep2 2024 Zuani scRNAseq"
    dataset_url: "https://info.vizgen.com/ffpe-showcase?submissionGuid=a93dbab5-c128-4269-afe3-82ea2bf9cdaf;https://www.ebi.ac.uk/biostudies/arrayexpress/studies/E-MTAB-13526"
    dataset_reference: "https://info.vizgen.com/ffpe-showcase?submissionGuid=a93dbab5-c128-4269-afe3-82ea2bf9cdaf;https://www.ebi.ac.uk/biostudies/arrayexpress/studies/E-MTAB-13526"
    dataset_summary: "Spatial data: Vizgen Human Lung Cancer MERFISH Patient2; Single cell data: 2024Zuani_human_nsclc_sc"
    dataset_description: "Spatial data: Vizgen Human Lung Cancer MERFISH Patient2; Single cell data: 2024Zuani_human_nsclc_sc"
    dataset_organism: "homo_sapiens"

  - id: "2022_vizgen_human_colon_cancer_merfish_combined/rep1"
    input_sp: "$input_dir/vizgen_merscope/2022_vizgen_human_colon_cancer_merfish/rep1/dataset.zarr"
    input_sc: "$input_dir/scrnaseq_for_ist/2020Lee_human_colon_cancer_sc/dataset.h5ad"
    dataset_id: "2022_vizgen_human_colon_cancer_merfish_combined/rep1"
    dataset_name: "Human colon cancer combined 2022 Vizgen MERFISH rep1 2020 Lee scRNAseq"
    dataset_url: "https://info.vizgen.com/ffpe-showcase;https://www.ncbi.nlm.nih.gov/geo/query/acc.cgi?acc=GSE132465"
    dataset_reference: "https://info.vizgen.com/ffpe-showcase;https://doi.org/10.1038/s41588-020-0636-z"
    dataset_summary: "Spatial data: 2022 Vizgen Human Colon Cancer MERFISH Patient1; Single cell data: 2020Lee_human_colon_cancer_sc"
    dataset_description: "Spatial data: 2022 Vizgen Human Colon Cancer MERFISH Patient1; Single cell data: 2020Lee_human_colon_cancer_sc"
    dataset_organism: "homo_sapiens"

  - id: "2022_vizgen_human_colon_cancer_merfish_combined/rep2"
    input_sp: "$input_dir/vizgen_merscope/2022_vizgen_human_colon_cancer_merfish/rep2/dataset.zarr"
    input_sc: "$input_dir/scrnaseq_for_ist/2020Lee_human_colon_cancer_sc/dataset.h5ad"
    dataset_id: "2022_vizgen_human_colon_cancer_merfish_combined/rep2"
    dataset_name: "Human colon cancer combined 2022 Vizgen MERFISH rep2 2020 Lee scRNAseq"
    dataset_url: "https://info.vizgen.com/ffpe-showcase;https://www.ncbi.nlm.nih.gov/geo/query/acc.cgi?acc=GSE132465"
    dataset_reference: "https://info.vizgen.com/ffpe-showcase;https://doi.org/10.1038/s41588-020-0636-z"
    dataset_summary: "Spatial data: 2022 Vizgen Human Colon Cancer MERFISH Patient2; Single cell data: 2020Lee_human_colon_cancer_sc"
    dataset_description: "Spatial data: 2022 Vizgen Human Colon Cancer MERFISH Patient2; Single cell data: 2020Lee_human_colon_cancer_sc"
    dataset_organism: "homo_sapiens"

  - id: "bruker_mouse_brain_cosmx_combined/rep1"
    input_sp: "$input_dir/bruker_cosmx/bruker_mouse_brain_cosmx/rep1/dataset.zarr"
    input_sc: "$input_dir/allen_brain_cell_atlas/2023_yao_mouse_brain_scrnaseq_10xv2/dataset.h5ad"
    dataset_id: "bruker_mouse_brain_cosmx_combined/rep1"
    dataset_name: "Mouse brain combined Bruker CosMx rep1 2023 Yao scRNAseq"
    dataset_url: "https://nanostring.com/products/cosmx-spatial-molecular-imager/ffpe-dataset/cosmx-smi-mouse-brain-ffpe-dataset/;https://www.ncbi.nlm.nih.gov/geo/query/acc.cgi?acc=GSE246717"
    dataset_reference: "https://nanostring.com/products/cosmx-spatial-molecular-imager/ffpe-dataset/cosmx-smi-mouse-brain-ffpe-dataset/;10.1038/s41586-023-06812-z"
    dataset_summary: "Spatial data: Bruker CosMx Mouse Brain; Single cell data: ABCA Mouse Brain scRNAseq"
    dataset_description: "Spatial data: Bruker CosMx Mouse Brain; Single cell data: ABCA Mouse Brain scRNAseq"
    dataset_organism: "mus_musculus"

  - id: "bruker_human_liver_cancer_cosmx_combined"
    input_sp: "$input_dir/bruker_cosmx/bruker_human_liver_cancer_cosmx/dataset.zarr"
    input_sc: "$input_dir/scrnaseq_for_ist/2022Lu_human_liver_cancer_sc/dataset.h5ad"
    dataset_id: "bruker_human_liver_cancer_cosmx_combined"
    dataset_name: "Human liver cancer combined Bruker CosMx 2022 Lu scRNAseq"
    dataset_url: "https://nanostring.com/products/cosmx-spatial-molecular-imager/ffpe-dataset/human-liver-rna-ffpe-dataset/;https://www.ncbi.nlm.nih.gov/geo/query/acc.cgi?acc=GSE149614"
    dataset_reference: "https://nanostring.com/products/cosmx-spatial-molecular-imager/ffpe-dataset/human-liver-rna-ffpe-dataset/;https://doi.org/10.1038/s41467-022-32283-3"
    dataset_summary: "Spatial data: Bruker CosMx Human Liver; Single cell data: 2022Lu_human_liver_cancer_sc"
    dataset_description: "Spatial data: Bruker CosMx Human Liver; Single cell data: 2022Lu_human_liver_cancer_sc"
    dataset_organism: "homo_sapiens"

  - id: "bruker_human_lung_cancer_cosmx_combined/lung5_rep1"
    input_sp: "$input_dir/bruker_cosmx/bruker_human_lung_cancer_cosmx/lung5_rep1/dataset.zarr"
    input_sc: "$input_dir/zuani_human_nsclc_sc/2024Zuani_human_nsclc_sc/dataset.h5ad"
    dataset_id: "bruker_human_lung_cancer_cosmx_combined/lung5_rep1"
    dataset_name: "Human lung cancer combined Bruker CosMx Lung5 rep1 2024 Zuani scRNAseq"
    dataset_url: "https://nanostring.com/products/cosmx-spatial-molecular-imager/ffpe-dataset/nsclc-ffpe-dataset/;https://www.ebi.ac.uk/biostudies/arrayexpress/studies/E-MTAB-13526"
    dataset_reference: "https://nanostring.com/products/cosmx-spatial-molecular-imager/ffpe-dataset/nsclc-ffpe-dataset/;https://www.ebi.ac.uk/biostudies/arrayexpress/studies/E-MTAB-13526"
    dataset_summary: "Spatial data: Bruker CosMx Human Lung Cancer Lung5 Rep1; Single cell data: 2024Zuani_human_nsclc_sc"
    dataset_description: "Spatial data: Bruker CosMx Human Lung Cancer Lung5 Rep1; Single cell data: 2024Zuani_human_nsclc_sc"
    dataset_organism: "homo_sapiens"

  - id: "bruker_human_lung_cancer_cosmx_combined/lung5_rep2"
    input_sp: "$input_dir/bruker_cosmx/bruker_human_lung_cancer_cosmx/lung5_rep2/dataset.zarr"
    input_sc: "$input_dir/zuani_human_nsclc_sc/2024Zuani_human_nsclc_sc/dataset.h5ad"
    dataset_id: "bruker_human_lung_cancer_cosmx_combined/lung5_rep2"
    dataset_name: "Human lung cancer combined Bruker CosMx Lung5 rep2 2024 Zuani scRNAseq"
    dataset_url: "https://nanostring.com/products/cosmx-spatial-molecular-imager/ffpe-dataset/nsclc-ffpe-dataset/;https://www.ebi.ac.uk/biostudies/arrayexpress/studies/E-MTAB-13526"
    dataset_reference: "https://nanostring.com/products/cosmx-spatial-molecular-imager/ffpe-dataset/nsclc-ffpe-dataset/;https://www.ebi.ac.uk/biostudies/arrayexpress/studies/E-MTAB-13526"
    dataset_summary: "Spatial data: Bruker CosMx Human Lung Cancer Lung5 Rep2; Single cell data: 2024Zuani_human_nsclc_sc"
    dataset_description: "Spatial data: Bruker CosMx Human Lung Cancer Lung5 Rep2; Single cell data: 2024Zuani_human_nsclc_sc"
    dataset_organism: "homo_sapiens"

  - id: "bruker_human_lung_cancer_cosmx_combined/lung5_rep3"
    input_sp: "$input_dir/bruker_cosmx/bruker_human_lung_cancer_cosmx/lung5_rep3/dataset.zarr"
    input_sc: "$input_dir/zuani_human_nsclc_sc/2024Zuani_human_nsclc_sc/dataset.h5ad"
    dataset_id: "bruker_human_lung_cancer_cosmx_combined/lung5_rep3"
    dataset_name: "Human lung cancer combined Bruker CosMx Lung5 rep3 2024 Zuani scRNAseq"
    dataset_url: "https://nanostring.com/products/cosmx-spatial-molecular-imager/ffpe-dataset/nsclc-ffpe-dataset/;https://www.ebi.ac.uk/biostudies/arrayexpress/studies/E-MTAB-13526"
    dataset_reference: "https://nanostring.com/products/cosmx-spatial-molecular-imager/ffpe-dataset/nsclc-ffpe-dataset/;https://www.ebi.ac.uk/biostudies/arrayexpress/studies/E-MTAB-13526"
    dataset_summary: "Spatial data: Bruker CosMx Human Lung Cancer Lung5 Rep3; Single cell data: 2024Zuani_human_nsclc_sc"
    dataset_description: "Spatial data: Bruker CosMx Human Lung Cancer Lung5 Rep3; Single cell data: 2024Zuani_human_nsclc_sc"
    dataset_organism: "homo_sapiens"

  - id: "bruker_human_lung_cancer_cosmx_combined/lung6"
    input_sp: "$input_dir/bruker_cosmx/bruker_human_lung_cancer_cosmx/lung6/dataset.zarr"
    input_sc: "$input_dir/zuani_human_nsclc_sc/2024Zuani_human_nsclc_sc/dataset.h5ad"
    dataset_id: "bruker_human_lung_cancer_cosmx_combined/lung6"
    dataset_name: "Human lung cancer combined Bruker CosMx Lung6 2024 Zuani scRNAseq"
    dataset_url: "https://nanostring.com/products/cosmx-spatial-molecular-imager/ffpe-dataset/nsclc-ffpe-dataset/;https://www.ebi.ac.uk/biostudies/arrayexpress/studies/E-MTAB-13526"
    dataset_reference: "https://nanostring.com/products/cosmx-spatial-molecular-imager/ffpe-dataset/nsclc-ffpe-dataset/;https://www.ebi.ac.uk/biostudies/arrayexpress/studies/E-MTAB-13526"
    dataset_summary: "Spatial data: Bruker CosMx Human Lung Cancer Lung6; Single cell data: 2024Zuani_human_nsclc_sc"
    dataset_description: "Spatial data: Bruker CosMx Human Lung Cancer Lung6; Single cell data: 2024Zuani_human_nsclc_sc"
    dataset_organism: "homo_sapiens"

  - id: "bruker_human_lung_cancer_cosmx_combined/lung9_rep1"
    input_sp: "$input_dir/bruker_cosmx/bruker_human_lung_cancer_cosmx/lung9_rep1/dataset.zarr"
    input_sc: "$input_dir/zuani_human_nsclc_sc/2024Zuani_human_nsclc_sc/dataset.h5ad"
    dataset_id: "bruker_human_lung_cancer_cosmx_combined/lung9_rep1"
    dataset_name: "Human lung cancer combined Bruker CosMx Lung9 rep1 2024 Zuani scRNAseq"
    dataset_url: "https://nanostring.com/products/cosmx-spatial-molecular-imager/ffpe-dataset/nsclc-ffpe-dataset/;https://www.ebi.ac.uk/biostudies/arrayexpress/studies/E-MTAB-13526"
    dataset_reference: "https://nanostring.com/products/cosmx-spatial-molecular-imager/ffpe-dataset/nsclc-ffpe-dataset/;https://www.ebi.ac.uk/biostudies/arrayexpress/studies/E-MTAB-13526"
    dataset_summary: "Spatial data: Bruker CosMx Human Lung Cancer Lung9 Rep1; Single cell data: 2024Zuani_human_nsclc_sc"
    dataset_description: "Spatial data: Bruker CosMx Human Lung Cancer Lung9 Rep1; Single cell data: 2024Zuani_human_nsclc_sc"
    dataset_organism: "homo_sapiens"

  - id: "bruker_human_lung_cancer_cosmx_combined/lung9_rep2"
    input_sp: "$input_dir/bruker_cosmx/bruker_human_lung_cancer_cosmx/lung9_rep2/dataset.zarr"
    input_sc: "$input_dir/zuani_human_nsclc_sc/2024Zuani_human_nsclc_sc/dataset.h5ad"
    dataset_id: "bruker_human_lung_cancer_cosmx_combined/lung9_rep2"
    dataset_name: "Human lung cancer combined Bruker CosMx Lung9 rep2 2024 Zuani scRNAseq"
    dataset_url: "https://nanostring.com/products/cosmx-spatial-molecular-imager/ffpe-dataset/nsclc-ffpe-dataset/;https://www.ebi.ac.uk/biostudies/arrayexpress/studies/E-MTAB-13526"
    dataset_reference: "https://nanostring.com/products/cosmx-spatial-molecular-imager/ffpe-dataset/nsclc-ffpe-dataset/;https://www.ebi.ac.uk/biostudies/arrayexpress/studies/E-MTAB-13526"
    dataset_summary: "Spatial data: Bruker CosMx Human Lung Cancer Lung9 Rep2; Single cell data: 2024Zuani_human_nsclc_sc"
    dataset_description: "Spatial data: Bruker CosMx Human Lung Cancer Lung9 Rep2; Single cell data: 2024Zuani_human_nsclc_sc"
    dataset_organism: "homo_sapiens"

  - id: "bruker_human_lung_cancer_cosmx_combined/lung12"
    input_sp: "$input_dir/bruker_cosmx/bruker_human_lung_cancer_cosmx/lung12/dataset.zarr"
    input_sc: "$input_dir/zuani_human_nsclc_sc/2024Zuani_human_nsclc_sc/dataset.h5ad"
    dataset_id: "bruker_human_lung_cancer_cosmx_combined/lung12"
    dataset_name: "Human lung cancer combined Bruker CosMx Lung12 2024 Zuani scRNAseq"
    dataset_url: "https://nanostring.com/products/cosmx-spatial-molecular-imager/ffpe-dataset/nsclc-ffpe-dataset/;https://www.ebi.ac.uk/biostudies/arrayexpress/studies/E-MTAB-13526"
    dataset_reference: "https://nanostring.com/products/cosmx-spatial-molecular-imager/ffpe-dataset/nsclc-ffpe-dataset/;https://www.ebi.ac.uk/biostudies/arrayexpress/studies/E-MTAB-13526"
    dataset_summary: "Spatial data: Bruker CosMx Human Lung Cancer Lung12; Single cell data: 2024Zuani_human_nsclc_sc"
    dataset_description: "Spatial data: Bruker CosMx Human Lung Cancer Lung12; Single cell data: 2024Zuani_human_nsclc_sc"
    dataset_organism: "homo_sapiens"

  - id: "bruker_human_lung_cancer_cosmx_combined/lung13"
    input_sp: "$input_dir/bruker_cosmx/bruker_human_lung_cancer_cosmx/lung13/dataset.zarr"
    input_sc: "$input_dir/zuani_human_nsclc_sc/2024Zuani_human_nsclc_sc/dataset.h5ad"
    dataset_id: "bruker_human_lung_cancer_cosmx_combined/lung13"
    dataset_name: "Human lung cancer combined Bruker CosMx Lung13 2024 Zuani scRNAseq"
    dataset_url: "https://nanostring.com/products/cosmx-spatial-molecular-imager/ffpe-dataset/nsclc-ffpe-dataset/;https://www.ebi.ac.uk/biostudies/arrayexpress/studies/E-MTAB-13526"
    dataset_reference: "https://nanostring.com/products/cosmx-spatial-molecular-imager/ffpe-dataset/nsclc-ffpe-dataset/;https://www.ebi.ac.uk/biostudies/arrayexpress/studies/E-MTAB-13526"
    dataset_summary: "Spatial data: Bruker CosMx Human Lung Cancer Lung13; Single cell data: 2024Zuani_human_nsclc_sc"
    dataset_description: "Spatial data: Bruker CosMx Human Lung Cancer Lung13; Single cell data: 2024Zuani_human_nsclc_sc"
    dataset_organism: "homo_sapiens"



output_sc: "\$id/output_sc.h5ad"
output_sp: "\$id/output_sp.zarr"
output_state: "\$id/state.yaml"
publish_dir: "$publish_dir"
HERE

tw launch https://github.com/openproblems-bio/task_ist_preprocessing.git \
  --revision build/main \
  --pull-latest \
  --main-script target/nextflow/workflows/process_datasets/main.nf \
  --workspace 53907369739130 \
  --params-file /tmp/params.yaml \
  --config common/nextflow_helpers/labels_tw.config \
  --labels task_ist_preprocessing,process_datasets











# Initial configs for xenium mouse brain combined datasets

#   - id: "mouse_brain_combined/rep1"
#     input_sp: "$input_dir/10x_xenium/2023_10x_mouse_brain_xenium/rep1/dataset.zarr"
#     input_sc: "$input_dir/allen_brain_cell_atlas/2023_yao_mouse_brain_scrnaseq_10xv2/dataset.h5ad"
#     dataset_name: "Mouse brain combined 2023 tenx Xenium replicate 1 2023 Yao scRNAseq"
#     dataset_url: "https://www.10xgenomics.com/datasets/fresh-frozen-mouse-brain-replicates-1-standard;https://www.ncbi.nlm.nih.gov/geo/query/acc.cgi?acc=GSE246717"
#     dataset_reference: "https://www.10xgenomics.com/datasets/fresh-frozen-mouse-brain-replicates-1-standard;10.1038/s41586-023-06812-z"
#     dataset_summary: "Demonstration of gene expression profiling for fresh frozen mouse brain on the Xenium platform using the pre-designed Mouse Brain Gene Expression Panel (v1);A high-resolution scRNAseq atlas of cell types in the whole mouse brain"
#     dataset_description: "Demonstration of gene expression profiling for fresh frozen mouse brain on the Xenium platform using the pre-designed Mouse Brain Gene Expression Panel (v1). Replicate results demonstrate the high reproducibility of data generated by the platform. 10x Genomics obtained tissue from a C57BL/6 mouse from Charles River Laboratories. Three adjacent 10µm sections were placed on the same slide. Tissues were prepared following the demonstrated protocols Xenium In Situ for Fresh Frozen Tissues - Tissue Preparation Guide (CG000579) and Xenium In Situ for Fresh Frozen Tissues - Fixation & Permeabilization (CG000581).;See dataset_reference for more information. Note that we only took the 10xv2 data from the dataset."
#     dataset_organism: "mus_musculus"
#   - id: "mouse_brain_combined/rep2"
#     input_sp: "$input_dir/10x_xenium/2023_10x_mouse_brain_xenium/rep2/dataset.zarr"
#     input_sc: "$input_dir/allen_brain_cell_atlas/2023_yao_mouse_brain_scrnaseq_10xv2/dataset.h5ad"
#     dataset_name: "Mouse brain combined 2023 tenx Xenium replicate 2 2023 Yao scRNAseq"
#     dataset_url: "https://www.10xgenomics.com/datasets/fresh-frozen-mouse-brain-replicates-1-standard;https://www.ncbi.nlm.nih.gov/geo/query/acc.cgi?acc=GSE246717"
#     dataset_reference: "https://www.10xgenomics.com/datasets/fresh-frozen-mouse-brain-replicates-1-standard;10.1038/s41586-023-06812-z"
#     dataset_summary: "Demonstration of gene expression profiling for fresh frozen mouse brain on the Xenium platform using the pre-designed Mouse Brain Gene Expression Panel (v1);A high-resolution scRNAseq atlas of cell types in the whole mouse brain"
#     dataset_description: "Demonstration of gene expression profiling for fresh frozen mouse brain on the Xenium platform using the pre-designed Mouse Brain Gene Expression Panel (v1). Replicate results demonstrate the high reproducibility of data generated by the platform. 10x Genomics obtained tissue from a C57BL/6 mouse from Charles River Laboratories. Three adjacent 10µm sections were placed on the same slide. Tissues were prepared following the demonstrated protocols Xenium In Situ for Fresh Frozen Tissues - Tissue Preparation Guide (CG000579) and Xenium In Situ for Fresh Frozen Tissues - Fixation & Permeabilization (CG000581).;See dataset_reference for more information. Note that we only took the 10xv2 data from the dataset."
#     dataset_organism: "mus_musculus"
#   - id: "mouse_brain_combined/rep3"
#     input_sp: "$input_dir/10x_xenium/2023_10x_mouse_brain_xenium/rep3/dataset.zarr"
#     input_sc: "$input_dir/allen_brain_cell_atlas/2023_yao_mouse_brain_scrnaseq_10xv2/dataset.h5ad"
#     dataset_name: "Mouse brain combined 2023 tenx Xenium replicate 3 2023 Yao scRNAseq"
#     dataset_url: "https://www.10xgenomics.com/datasets/fresh-frozen-mouse-brain-replicates-1-standard;https://www.ncbi.nlm.nih.gov/geo/query/acc.cgi?acc=GSE246717"
#     dataset_reference: "https://www.10xgenomics.com/datasets/fresh-frozen-mouse-brain-replicates-1-standard;10.1038/s41586-023-06812-z"
#     dataset_summary: "Demonstration of gene expression profiling for fresh frozen mouse brain on the Xenium platform using the pre-designed Mouse Brain Gene Expression Panel (v1);A high-resolution scRNAseq atlas of cell types in the whole mouse brain"
#     dataset_description: "Demonstration of gene expression profiling for fresh frozen mouse brain on the Xenium platform using the pre-designed Mouse Brain Gene Expression Panel (v1). Replicate results demonstrate the high reproducibility of data generated by the platform. 10x Genomics obtained tissue from a C57BL/6 mouse from Charles River Laboratories. Three adjacent 10µm sections were placed on the same slide. Tissues were prepared following the demonstrated protocols Xenium In Situ for Fresh Frozen Tissues - Tissue Preparation Guide (CG000579) and Xenium In Situ for Fresh Frozen Tissues - Fixation & Permeabilization (CG000581).;See dataset_reference for more information. Note that we only took the 10xv2 data from the dataset."
#     dataset_organism: "mus_musculus"
